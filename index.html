<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Emoji Rogue Slots</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* Disables pull-to-refresh and other disruptive browser gestures on mobile */
        body {
            overscroll-behavior-y: contain;
            font-family: 'Chakra Petch', sans-serif;
        }

        /* Custom styling for the slot machine reel animation */
        .reel.spinning {
            animation: spinReel 0.1s linear infinite;
        }
        
        @keyframes spinReel {
            0% { transform: translateY(-20%); }
            100% { transform: translateY(20%); }
        }

        /* Custom styling for UI feedback */
        .action-button {
            transition: transform 0.1s ease, box-shadow 0.1s ease;
        }

        .action-button:active {
            transform: scale(0.95);
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        /* Custom scrollbar for enemy info */
        #enemy-info::-webkit-scrollbar {
            width: 4px;
        }

        #enemy-info::-webkit-scrollbar-thumb {
            background-color: #4f46e5;
            border-radius: 2px;
        }
        
        #enemy-info::-webkit-scrollbar-track {
            background-color: #1f2937;
        }

        /* Sharp corners as requested */
        .sharp {
            border-radius: 0 !important;
        }
        
        .border-gradient {
            border: 2px solid;
            border-image-slice: 1;
            border-image-source: linear-gradient(to right, #4f46e5, #ec4899);
        }
        
        .text-shadow {
            text-shadow: 0 0 5px rgba(236, 72, 153, 0.7), 0 0 10px rgba(79, 70, 229, 0.7);
        }
    </style>
</head>
<body class="bg-gray-900 text-white flex flex-col h-screen select-none">

    <!-- Top Section: Player Stats -->
    <header class="p-4 bg-gray-800 border-b-2 border-pink-500 shadow-lg">
        <div class="flex justify-between items-center mb-2">
            <span class="font-bold text-lg text-shadow">LVL: 1</span>
            <span class="font-bold text-lg text-shadow">üí∞ 125 G</span>
        </div>
        <!-- Health Bar -->
        <div class="w-full bg-gray-700 h-6 border-2 border-gray-600">
            <div id="health-bar" class="bg-gradient-to-r from-red-500 to-red-700 h-full text-center text-xs font-bold leading-6 transition-all duration-300" style="width: 85%;">HP: 85/100</div>
        </div>
        <!-- Energy Bar -->
        <div class="w-full bg-gray-700 h-6 mt-2 border-2 border-gray-600">
            <div id="energy-bar" class="bg-gradient-to-r from-blue-500 to-indigo-700 h-full text-center text-xs font-bold leading-6 transition-all duration-300" style="width: 60%;">‚ö°: 60/100</div>
        </div>
    </header>

    <!-- Middle Section: Slot Machine and Enemy Info -->
    <main class="flex-grow flex flex-col justify-center items-center p-4 overflow-hidden">
        <!-- Enemy Info Display -->
        <div id="enemy-info" class="w-full max-w-md h-24 bg-gray-800 border-2 border-indigo-500 p-2 mb-4 overflow-y-auto shadow-inner">
             <p id="enemy-info-text" class="text-center text-gray-400">Spin to encounter enemies!</p>
        </div>

        <!-- Slot Machine -->
        <div class="w-full max-w-md bg-gray-800 p-4 border-gradient shadow-2xl">
            <div id="slot-machine" class="flex justify-around items-center h-32 text-6xl">
                <div class="reel w-1/3 text-center bg-gray-900 p-2 mx-1 border-2 border-gray-700">‚öîÔ∏è</div>
                <div class="reel w-1/3 text-center bg-gray-900 p-2 mx-1 border-2 border-gray-700">üëπ</div>
                <div class="reel w-1/3 text-center bg-gray-900 p-2 mx-1 border-2 border-gray-700">üí∞</div>
            </div>
        </div>
    </main>

    <!-- Bottom Section: Actions -->
    <footer class="p-4 bg-gray-800 border-t-2 border-pink-500 grid grid-cols-3 gap-2">
        <button class="action-button col-span-3 text-2xl font-bold bg-gradient-to-r from-pink-500 to-indigo-600 p-4 shadow-lg active:from-pink-600 active:to-indigo-700" id="spin-button">
            SPIN
        </button>
        <button class="action-button bg-indigo-700 p-3 shadow-md active:bg-indigo-800">SHOP üõçÔ∏è</button>
        <button class="action-button bg-indigo-700 p-3 shadow-md active:bg-indigo-800">GEAR üõ°Ô∏è</button>
        <button class="action-button bg-indigo-700 p-3 shadow-md active:bg-indigo-800">SKILLS ‚ú®</button>
    </footer>

    <!-- Message Display -->
    <div id="message-box" class="hidden fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black bg-opacity-80 border-2 border-pink-500 p-6 text-center shadow-2xl z-50">
        <p id="message-text" class="text-lg"></p>
    </div>

    <script>
        const spinButton = document.getElementById('spin-button');
        const reels = document.querySelectorAll('.reel');
        const enemyInfoText = document.getElementById('enemy-info-text');
        const messageBox = document.getElementById('message-box');
        const messageText = document.getElementById('message-text');

        // Possible outcomes for the slots
        const outcomes = {
            'attack': { emoji: '‚öîÔ∏è', name: 'Attack', description: 'Player attacks!' },
            'gold': { emoji: 'üí∞', name: 'Gold', description: 'You found some gold!'},
            'potion': { emoji: 'üß™', name: 'Potion', description: 'A healing potion!'},
            'enemy1': { emoji: 'üëπ', name: 'Goblin', description: 'A wild Goblin appears!', hp: 20 },
            'enemy2': { emoji: 'üëª', name: 'Ghost', description: 'A spooky Ghost haunts you!', hp: 15 },
            'enemy3': { emoji: 'üêç', name: 'Snake', description: 'A venomous Snake strikes!', hp: 10 },
            'boss': { emoji: 'üêâ', name: 'Dragon', description: 'A mighty Dragon appears!', hp: 100 },
        };
        
        const outcomeKeys = Object.keys(outcomes);

        let isSpinning = false;

        spinButton.addEventListener('click', () => {
            if (isSpinning) return;
            isSpinning = true;
            
            // Clear previous enemy info
            enemyInfoText.innerHTML = "";
            
            // Add spinning class and randomize content during spin
            reels.forEach(reel => {
                reel.classList.add('spinning');
                const spinInterval = setInterval(() => {
                    const randomKey = outcomeKeys[Math.floor(Math.random() * outcomeKeys.length)];
                    reel.textContent = outcomes[randomKey].emoji;
                }, 100);

                // Stop spinning after a random delay for each reel
                setTimeout(() => {
                    clearInterval(spinInterval);
                    reel.classList.remove('spinning');
                    
                    // Set final outcome
                    const finalKey = outcomeKeys[Math.floor(Math.random() * outcomeKeys.length)];
                    const finalOutcome = outcomes[finalKey];
                    reel.textContent = finalOutcome.emoji;
                    
                    // Display info for enemies
                    if(finalOutcome.hp){
                        const enemyDisplay = document.createElement('div');
                        enemyDisplay.className = "text-center p-1";
                        enemyDisplay.innerHTML = `<span class="font-bold text-pink-400">${finalOutcome.name}</span> - HP: ${finalOutcome.hp}`;
                        enemyInfoText.appendChild(enemyDisplay);
                    } else {
                         showMessage(finalOutcome.description, 1500);
                    }

                }, 1000 + Math.random() * 500);
            });
            
            // Reset spinning state
            setTimeout(() => {
                isSpinning = false;
            }, 1500);
        });
        
        // Show a message to the player
        function showMessage(msg, duration = 2000) {
            messageText.textContent = msg;
            messageBox.classList.remove('hidden');
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, duration);
        }
        
        // Event listeners for other action buttons
        document.querySelectorAll('.action-button').forEach(button => {
            if (button.id !== 'spin-button') {
                button.addEventListener('click', () => {
                    if(!isSpinning) {
                        showMessage(`The ${button.textContent.trim().split(" ")[0]} is not yet implemented.`, 1500);
                    }
                });
            }
        });

    </script>
</body>
</html>
