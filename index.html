<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portrait Game UI Demo</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Import 'Inter' font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* * 1. GLOBAL & FONT SETUP
         * We use the 'Inter' font and set a dark background.
         * 'overflow: hidden' prevents scrolling, which is crucial for a game.
         * We use 'dvh' (dynamic viewport height) to ensure the UI fills the screen
         * on mobile browsers, even when the address bar appears/disappears.
         */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* dark gray-blue */
            color: #ffffff;
            overflow: hidden;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* * 2. ORIENTATION LOCK
         * This element is hidden by default and becomes a flex container
         * (taking up the whole screen) ONLY in landscape orientation.
         * This forces the user to rotate their device.
         */
        #orientation-lock {
            display: none; /* Hidden by default (in portrait) */
            position: fixed;
            inset: 0;
            z-index: 1000;
            background-color: #111827;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }

        /* The SVG icon for rotation */
        #orientation-lock svg {
            width: 8vmin;
            height: 8vmin;
            margin-bottom: 1.5rem;
            animation: rotate-device 2s infinite cubic-bezier(0.4, 0, 0.6, 1);
        }

        @keyframes rotate-device {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
        }

        /* * MEDIA QUERY: This is the magic.
         * If the orientation is landscape, hide the game and show the lock screen.
         * UPDATED: We replace '(max-height: 850px)' with '(hover: none)'.
         * This targets devices that are in landscape AND do not have a
         * primary hover capability (i.e., mobile phones and tablets).
         * This prevents the lock from appearing on desktops/laptops.
         */
        @media (orientation: landscape) and (hover: none) {
            #orientation-lock {
                display: flex;
            }
            #game-wrapper {
                display: none;
            }
        }

        /* * 3. GAME WRAPPER
         * This is the main container for our portrait game.
         * It uses flex-column to stack Header, Main (Canvas), and Footer.
         * It has a max-width to look good on tablets/desktops.
         * 'height: 100dvh' is the key for full-screen on mobile.
         */
        #game-wrapper {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100dvh;
            max-width: 500px; /* Common max-width for portrait apps */
            background-color: #1F2937; /* dark gray */
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* * 4. UI SECTIONS (HEADER, MAIN, FOOTER)
         */

        #game-header, #game-footer {
            flex-shrink: 0;
            padding: 0.75rem 1rem; /* Reduced padding for a slimmer feel */
            background-color: rgba(0,0,0,0.2);
            z-index: 10;
        }

        #game-header { border-bottom: 1px solid #374151; }
        #game-footer { border-top: 1px solid #374151; }

        /* Main game area fills all remaining space */
        #game-canvas-container {
            flex-grow: 1; /* This is the most important part! */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Prevent canvas from overflowing */
            position: relative;
        }

        /* * 5. GAME CANVAS
         */
        #game-canvas {
            background: #374151;
            max-width: 100%;
            max-height: 100%;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        /* * 6. RESPONSIVE COMPONENTS
         */

        /*
         * REMOVED: .stat-level-display styles
         * This class is no longer used as the level and player
         * info is now a single, space-efficient text row.
         */

        /* * NEW: Stat Bars (Thinner) */
        .stat-bar {
            width: 100%;
            background-color: #111827;
            border-radius: 9999px;
            border: 1px solid #374151;
            position: relative;
            overflow: hidden;
        }
        .stat-bar-inner {
            height: 100%;
            border-radius: 9999px;
            transition: width 0.3s ease;
        }
        .stat-bar-text {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
        }

        /* HP Bar */
        .stat-bar.hp { height: 18px; } /* Was 24px */
        .stat-bar.hp .stat-bar-inner { background-color: #22C55E; } /* green-500 */
        .stat-bar.hp .stat-bar-text { color: #1F2937; font-size: 0.75rem; } /* 12px */

        /* Energy Bar */
        .stat-bar.energy { height: 14px; } /* Was 16px */
        .stat-bar.energy .stat-bar-inner { background-color: #0EA5E9; } /* sky-500 */
        .stat-bar.energy .stat-bar-text { font-size: 0.75rem; color: #1F2937; } /* 12px */

        /* * NEW: Currency Display Icons */
        .stat-currency-icon {
            width: 20px;
            height: 20px;
            border-radius: 9999px;
            margin-right: 0.5rem; /* 8px */
        }
        .stat-currency-icon.gold {
            background-color: #FACC15; /* yellow-400 */
            border: 2px solid #FDE047; /* yellow-300 */
        }
        .stat-currency-icon.gems {
            width: 18px;
            height: 18px;
            background-color: #A78BFA; /* violet-400 */
            border: 2px solid #C4B5FD; /* violet-300 */
            transform: rotate(45deg);
            border-radius: 4px;
        }

        .stat-currency-icon.wood {
            background-color: #78350F; /* amber-900 */
            border: 2px solid #A16207; /* amber-700 */
            border-radius: 4px;
        }
        .stat-currency-icon.stone {
            background-color: #57534E; /* stone-600 */
            border: 2px solid #78716C; /* stone-500 */
            border-radius: 8px;
        }

        /* Currency amount text style (was part of .currency-item) */
        .currency-amount {
            font-weight: 700; /* font-bold */
            font-size: 1rem; /* text-base */
        }
        
        /*
         * REMOVED: .currency-item styles
         * The bubble style is gone. We now have a single panel
         * created with Tailwind classes in the HTML.
         */

        /* * Action Buttons Base Style (Original, for modals etc.)
         */
        .game-button {
            font-size: clamp(0.875rem, 4vmin, 1.125rem);
            padding-top: 0.85rem;
            padding-bottom: 0.85rem;
            font-weight: 700;
            border-radius: 0.5rem; /* 8px */
            transition: transform 75ms ease-out, box-shadow 75ms ease-out, background-color 75ms ease-out;
        }
        
        /* * NEW: Round Action Buttons (for footer) */
        .action-button-round {
            width: 60px;
            height: 60px;
            border-radius: 9999px; /* rounded-full */
            font-weight: 700;
            transition: transform 75ms ease-out, box-shadow 75ms ease-out, background-color 75ms ease-out;
            /* We'll add icons here later if needed */
        }


        /* * 3D Button Styles */
        .btn-red {
            background-color: #DC2626; /* red-600 */
            box-shadow: 0 4px 0 0 #B91C1C; /* red-700 */
        }
        .btn-red:active {
            background-color: #EF4444; /* red-500 */
            transform: translateY(3px) scale(0.98);
            box-shadow: 0 1px 0 0 #B91C1C;
        }

        .btn-blue {
            background-color: #2563EB; /* blue-600 */
            box-shadow: 0 4px 0 0 #1D4ED8; /* blue-800 */
        }
        .btn-blue:active {
            background-color: #3B82F6; /* blue-500 */
            transform: translateY(3px) scale(0.98);
            box-shadow: 0 1px 0 0 #1D4ED8;
        }

        /* * Item Slot */
        .item-slot {
            width: clamp(48px, 14vmin, 64px);
            height: clamp(48px, 14vmin, 64px);
            background-color: #111827; /* Darker bg */
            border: 2px solid #374151; /* Gray border */
            border-radius: 0.5rem; /* 8px */
            box-shadow: inset 0 2px 4px 0 rgba(0, 0, 0, 0.4); /* Inner shadow */
        }

        /* * MODAL (Pop-up)
         */
        #settings-modal {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            z-index: 100;
        }
    </style>
</head>
<body class="bg-gray-900">

    <!--
      ORIENTATION LOCK SCREEN
      This is hidden by default and only shown via CSS @media query
    -->
    <div id="orientation-lock">
        <!-- Rotate SVG Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
        </svg>
        <h2 class="text-2xl font-bold">Please rotate your device</h2>
        <p class="text-lg text-gray-400 mt-2">This game is best played in portrait mode.</p>
    </div>

    <!--
      GAME WRAPPER
      This is the main container for the game, visible only in portrait.
    -->
    <div id="game-wrapper">

        <!-- 1. HEADER (Top UI Bar) - UPDATED -->
        <header id="game-header" class="flex flex-col space-y-3">

            <!-- Row 1: Level + Player Info (Space-efficient) -->
            <div class="flex items-baseline justify-between text-base">
                <div class="font-medium">
                    <span class="text-lg font-bold text-blue-400">LVL 8</span>
                    <span class="text-gray-500 mx-2">|</span>
                    <span class="font-bold">Player_123</span>
                </div>
                <span class="text-sm text-blue-300 font-medium">"The Brave"</span>
            </div>

            <!-- Row 2: HP Bar (Thinner) -->
            <div class="stat-bar hp">
                <div class="stat-bar-inner" style="width: 75%;"></div>
                <div class="stat-bar-text">750 / 1000</div>
            </div>

            <!-- Row 3: Energy Bar (Thinner) -->
            <div class="stat-bar energy">
                <div class="stat-bar-inner" style="width: 90%;"></div>
                <div class="stat-bar-text">90 / 100</div>
            </div>

            <!-- Row 4: Currencies (Slim Panel) -->
            <div class="flex items-center justify-around bg-gray-900/50 rounded-lg p-2 border border-gray-700">
                <!-- Gold -->
                <div class="flex items-center">
                    <div class="stat-currency-icon gold"></div>
                    <span class="currency-amount" id="score-display">1,250</span>
                </div>
                <!-- Gems -->
                <div class="flex items-center">
                    <div class="stat-currency-icon gems"></div>
                    <span class="currency-amount" id="gem-display">48</span>
                </div>
                <!-- Wood -->
                <div class="flex items-center">
                    <div class="stat-currency-icon wood"></div>
                    <span class="currency-amount" id="wood-display">300</span>
                </div>
                <!-- Stone -->
                <div classall="flex items-center">
                    <div class="stat-currency-icon stone"></div>
                    <span class="currency-amount" id="stone-display">150</span>
                </div>
            </div>

        </header>

        <!-- 2. MAIN GAME AREA (Canvas Container) -->
        <main id="game-canvas-container">
            <canvas id="game-canvas"></canvas>
        </main>

        <!-- 3. FOOTER (Action Bar) - UPDATED -->
        <footer id="game-footer">
            <div class="flex items-center justify-between">

                <!-- Left Side: 3 Item Slots -->
                <div class="flex space-x-2">
                    <div class="item-slot"></div>
                    <div class="item-slot"></div>
                    <div class="item-slot"></div>
                </div>

                <!-- Right Side: 2 Round Buttons (Side-by-side) -->
                <div class="flex space-x-3 ml-4">
                    <button data-action="attack" class="action-button-round text-white btn-red"></button>
                    <button data-action="ability-1" class="action-button-round text-white btn-blue"></button>
                </div>
            </div>
        </footer>

        <!--
          REMOVED: Settings Modal
        -->

    </div> <!-- End #game-wrapper -->

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            const canvasContainer = document.getElementById('game-canvas-container');

            // --- 1. FIXED ASPECT RATIO (9:16) ---
            const GAME_ASPECT_RATIO = 9 / 16;
            canvas.width = 1080;  // 9 * 120
            canvas.height = 1920; // 16 * 120

            function resizeCanvas() {
                const containerWidth = canvasContainer.clientWidth;
                const containerHeight = canvasContainer.clientHeight;
                const containerRatio = containerWidth / containerHeight;

                let newWidth, newHeight;

                if (containerRatio < GAME_ASPECT_RATIO) {
                    newWidth = containerWidth;
                    newHeight = containerWidth / GAME_ASPECT_RATIO;
                } else {
                    newHeight = containerHeight;
                    newWidth = containerHeight * GAME_ASPECT_RATIO;
                }

                canvas.style.width = `${Math.floor(newWidth)}px`;
                canvas.style.height = `${Math.floor(newHeight)}px`;
            }

            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();

            // --- 2. "SCREENSAVER" GAME LOOP ---

            // Logo properties, sized relative to the 1080x1920 internal canvas
            let logo = {
                x: 150,
                y: 100,
                width: 300,
                height: 150,
                speedX: 5,
                speedY: 5,
                color: '#3B82F6' // Start blue
            };

            function getRandomColor() {
                const letters = '0123456789ABCDEF';
                let color = '#';
                for (let i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            }

            function gameLoop() {
                // Update position
                logo.x += logo.speedX;
                logo.y += logo.speedY;

                // Collision detection with walls
                let hitWall = false;

                // Left wall
                if (logo.x < 0) {
                    logo.speedX *= -1;
                    logo.x = 0;
                    hitWall = true;
                }
                // Right wall
                if (logo.x + logo.width > canvas.width) {
                    logo.speedX *= -1;
                    logo.x = canvas.width - logo.width;
                    hitWall = true;
                }
                // Top wall
                if (logo.y < 0) {
                    logo.speedY *= -1;
                    logo.y = 0;
                    hitWall = true;
                }
                // Bottom wall
                if (logo.y + logo.height > canvas.height) {
                    logo.speedY *= -1;
                    logo.y = canvas.height - logo.height;
                    hitWall = true;
                }

                // Change color on hit
                if (hitWall) {
                    logo.color = getRandomColor();
                }

                // --- Draw everything ---

                // Clear the canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw "LOGO" box
                ctx.fillStyle = logo.color;
                ctx.fillRect(logo.x, logo.y, logo.width, logo.height);

                // Draw text inside the box
                ctx.fillStyle = '#FFFFFF'; // White text
                ctx.font = 'bold 80px Inter';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle'; // Center text vertically
                ctx.fillText('LOGO', logo.x + logo.width / 2, logo.y + logo.height / 2);

                requestAnimationFrame(gameLoop);
            }

            gameLoop();

            // --- 3. INPUT ABSTRACTION (Pointer Events) ---

            // Game action buttons
            const actionButtons = document.querySelectorAll('.action-button-round[data-action]');
            actionButtons.forEach(button => {
                button.addEventListener('pointerdown', (e) => {
                    // CSS :active pseudo-class handles the animation.
                    // We just log the action.
                    const action = e.currentTarget.dataset.action;
                    console.log(`Action triggered: ${action}`);
                });
            });
        });
    </script>

</body>
</html>
