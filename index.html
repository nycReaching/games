<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Portrait Game UI Demo</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Import 'Inter' font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* * 1. GLOBAL & FONT SETUP
         * We use the 'Inter' font and set a dark background.
         * 'overflow: hidden' prevents scrolling, which is crucial for a game.
         * We use 'dvh' (dynamic viewport height) to ensure the UI fills the screen
         * on mobile browsers, even when the address bar appears/disappears.
         */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* dark gray-blue */
            color: #ffffff;
            overflow: hidden;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* * 2. ORIENTATION LOCK
         * This element is hidden by default and becomes a flex container
         * (taking up the whole screen) ONLY in landscape orientation.
         * This forces the user to rotate their device.
         */
        #orientation-lock {
            display: none; /* Hidden by default (in portrait) */
            position: fixed;
            inset: 0;
            z-index: 1000;
            background-color: #111827;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        
        /* The SVG icon for rotation */
        #orientation-lock svg {
            width: 8vmin;
            height: 8vmin;
            margin-bottom: 1.5rem;
            animation: rotate-device 2s infinite cubic-bezier(0.4, 0, 0.6, 1);
        }

        @keyframes rotate-device {
            0%, 100% { transform: rotate(0deg); }
            50% { transform: rotate(90deg); }
        }

        /* * MEDIA QUERY: This is the magic.
         * If the orientation is landscape, hide the game and show the lock screen.
         */
        @media (orientation: landscape) {
            #orientation-lock {
                display: flex;
            }
            #game-wrapper {
                display: none;
            }
        }

        /* * 3. GAME WRAPPER
         * This is the main container for our portrait game.
         * It uses flex-column to stack Header, Main (Canvas), and Footer.
         * It has a max-width to look good on tablets/desktops.
         * 'height: 100dvh' is the key for full-screen on mobile.
         */
        #game-wrapper {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: 100dvh;
            max-width: 500px; /* Common max-width for portrait apps */
            background-color: #1F2937; /* dark gray */
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        /* * 4. UI SECTIONS (HEADER, MAIN, FOOTER)
         */
        
        /* Header & Footer are locked, non-shrinking bars */
        #game-header, #game-footer {
            flex-shrink: 0;
            padding: 0.75rem 1rem;
            background-color: rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        #game-header { border-bottom: 1px solid #374151; }
        #game-footer { border-top: 1px solid #374151; }

        /* Main game area fills all remaining space */
        #game-canvas-container {
            flex-grow: 1; /* This is the most important part! */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* Prevent canvas from overflowing */
            position: relative;
        }

        /* * 5. GAME CANVAS
         * The canvas itself. Its size is set by JavaScript to maintain
         * the aspect ratio, but it's centered in its container.
         * The 'object-fit' property isn't used here since JS
         * is setting the style, but 'max-width/height' are good fallbacks.
         */
        #game-canvas {
            background: #374151;
            max-width: 100%;
            max-height: 100%;
            image-rendering: -moz-crisp-edges;
            image-rendering: -webkit-crisp-edges;
            image-rendering: pixelated;
            image-rendering: crisp-edges;
        }

        /* * 6. RESPONSIVE COMPONENTS
         */

        /* Icons: We use 'vmin' to make icons scale with the
         * smallest viewport dimension, ensuring they are always
         * a good size in any portrait-like aspect ratio.
         */
        .stat-icon {
            width: 5vmin;
            height: 5vmin;
            max-width: 24px;
            max-height: 24px;
            min-width: 18px;
            min-height: 18px;
        }

        /* * Action Buttons: This demonstrates the clamp() function.
         * Font size will be 4vmin (scales with viewport).
         * ...but it will NOT go below 0.875rem (14px).
         * ...and it will NOT go above 1.125rem (18px).
         * This gives us fluid scaling with safe boundaries.
         */
        .game-button {
            font-size: clamp(0.875rem, 4vmin, 1.125rem);
            transition: all 0.1s ease-in-out;
        }

        /* * 7. MODAL (Pop-up)
         * A standard, hidden-by-default modal pattern.
         * It uses 'inset-0' to fill its parent (#game-wrapper).
         * We use CSS classes (e.g., '.hidden') to toggle visibility.
         */
        #settings-modal {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
            z-index: 100;
        }
    </style>
</head>
<body class="bg-gray-900">

    <!-- 
      ORIENTATION LOCK SCREEN 
      This is hidden by default and only shown via CSS @media query
    -->
    <div id="orientation-lock">
        <!-- Rotate SVG Icon -->
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 15L3 9m0 0l6-6M3 9h12a6 6 0 010 12h-3" />
        </svg>
        <h2 class="text-2xl font-bold">Please rotate your device</h2>
        <p class="text-lg text-gray-400 mt-2">This game is best played in portrait mode.</p>
    </div>

    <!-- 
      GAME WRAPPER
      This is the main container for the game, visible only in portrait.
    -->
    <div id="game-wrapper">

        <!-- 1. HEADER (Top UI Bar) -->
        <header id="game-header" class="flex items-center justify-between">
            <!-- Left Stats: Score & Gems -->
            <div class="flex items-center space-x-4">
                <!-- Score -->
                <div class="flex items-center space-x-2 bg-gray-900 px-3 py-1 rounded-full">
                    <!-- Coin SVG -->
                    <svg class="stat-icon text-yellow-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 11.21 12.77 10.5 12 10.5s-1.536.71-2.121 1.256c-1.172.879-1.172 2.303 0 3.182z" />
                    </svg>
                    <span id="score-display" class="text-lg font-bold">1,250</span>
                </div>
                <!-- Gems -->
                <div class="flex items-center space-x-2 bg-gray-900 px-3 py-1 rounded-full">
                    <!-- Gem SVG -->
                    <svg class="stat-icon text-purple-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c.667 0 1.333.224 2 .667V6.5A2.5 2.5 0 0011.5 4L12 3.5 12.5 4A2.5 2.5 0 0115 6.5v2.167c.667-.443 1.333-.667 2-.667h1.5a2.5 2.5 0 012.5 2.5v.5c0 .667-.224 1.333-.667 2L20.5 15h-1.167c-.667 0-1.333.224-2 .667v2.167A2.5 2.5 0 0114.5 20l-.5.5-.5-.5A2.5 2.5 0 0111 17.833V15.667c-.667-.443-1.333-.667-2-.667H7.5A2.5 2.5 0 015 12.5v-.5c0-.667.224-1.333.667-2L3.5 10h1.167c.667 0 1.333-.224 2-.667V7.167A2.5 2.5 0 019.5 4l.5-.5.5.5A2.5 2.5 0 0113 7.167V9.333c-.667-.443-1.333-.667-2-.667H9.5A2.5 2.5 0 007 10.5v.5c0 .667.224 1.333.667 2L5.5 13h1.167c.667 0 1.333.224 2 .667v2.167a2.5 2.5 0 002.5 2.5l.5.5.5-.5a2.5 2.5 0 002.5-2.5V13.667c.667-.443 1.333-.667 2-.667h1.167l-2.167-1.5c-.443-.667-.667-1.333-.667-2v-.5a2.5 2.5 0 012.5-2.5h-1.5z" />
                    </svg>
                    <span id="gem-display" class="text-lg font-bold">48</span>
                </div>
            </div>
            
            <!-- Right Side: Settings Button -->
            <button id="settings-btn" class="p-2 rounded-full hover:bg-gray-600 transition-colors">
                <!-- Cog SVG -->
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-1.007 1.11-.902l.11.02a11.985 11.985 0 013.67 1.63M9.594 3.94L8.25 15.006M14.406 3.94L15.75 15.006M14.406 3.94c-.09.542-.56 1.007-1.11.902l-.11-.02a11.985 11.985 0 00-3.67 1.63M14.406 3.94L15.75 15.006M14.406 3.94L13.06 15.006M9.594 3.94L10.94 15.006m2.12-11.066c.09-.542.56-1.007 1.11-.902l.11.02a11.985 11.985 0 013.67 1.63m-4.78 0L8.25 15.006m4.78-11.066L15.75 15.006m-4.78-11.066L13.06 15.006m-2.12 11.066c-.09.542-.56 1.007-1.11.902l-.11-.02a11.985 11.985 0 00-3.67-1.63m4.78 0L15.75 15.006m-4.78 0L13.06 15.006m0 0L8.25 15.006m4.78 0L15.75 15.006" />
                </svg>
            </button>
        </header>

        <!-- 2. MAIN GAME AREA (Canvas Container) -->
        <main id="game-canvas-container">
            <canvas id="game-canvas"></canvas>
        </main>

        <!-- 3. FOOTER (Action Bar) -->
        <footer id="game-footer">
            <div class="grid grid-cols-3 gap-2 sm:gap-4">
                <!-- 
                  These buttons demonstrate:
                  1. Input Abstraction: They use 'data-action' to define their logic.
                  2. 'game-button' class: Uses clamp() for responsive fonts.
                  3. Tailwind: For all other styling.
                -->
                <button data-action="ability-1" class="game-button bg-blue-600 text-white font-bold p-3 rounded-lg shadow-lg hover:bg-blue-500 active:bg-blue-700">Ability 1</button>
                <button data-action="attack" class="game-button bg-red-600 text-white font-bold p-3 rounded-lg shadow-lg hover:bg-red-500 active:bg-red-700">Attack</button>
                <button data-action="inventory" class="game-button bg-gray-600 text-white font-bold p-3 rounded-lg shadow-lg hover:bg-gray-500 active:bg-gray-700">Items</button>
            </div>
        </footer>

        <!-- 
          4. MODAL (Settings) 
          This is hidden by default and sits on top of the #game-wrapper
        -->
        <div id="settings-modal" class="hidden items-center justify-center p-4">
            <div class="bg-white text-gray-900 w-full max-w-sm rounded-lg shadow-2xl p-6">
                <h2 class="text-2xl font-bold mb-4">Settings</h2>
                <div class="space-y-4">
                    <label class="flex items-center justify-between">
                        <span class="text-lg">Music</span>
                        <input type="checkbox" class="form-checkbox h-6 w-6 text-blue-600 rounded" checked>
                    </label>
                    <label class="flex items-center justify-between">
                        <span class="text-lg">Sound FX</span>
                        <input type="checkbox" class="form-checkbox h-6 w-6 text-blue-600 rounded" checked>
                    </label>
                    <div class="pt-2">
                        <span class="text-lg">Volume</span>
                        <input type="range" class="w-full mt-1" min="0" max="100" value="75">
                    </div>
                </div>
                <button id="close-modal-btn" class="game-button w-full mt-6 bg-blue-600 text-white font-bold p-3 rounded-lg hover:bg-blue-500">
                    Close
                </button>
            </div>
        </div>

    </div> <!-- End #game-wrapper -->

    <script>
        window.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            const canvasContainer = document.getElementById('game-canvas-container');

            // --- 1. FIXED ASPECT RATIO (9:16) ---
            // We define a base internal resolution for the game.
            // This is NOT the canvas's size in pixels, but its logical size.
            const GAME_ASPECT_RATIO = 9 / 16;
            canvas.width = 1080;  // 9 * 120
            canvas.height = 1920; // 16 * 120

            function resizeCanvas() {
                const containerWidth = canvasContainer.clientWidth;
                const containerHeight = canvasContainer.clientHeight;
                const containerRatio = containerWidth / containerHeight;

                let newWidth, newHeight;

                // Compare container ratio to game ratio to decide scaling
                if (containerRatio < GAME_ASPECT_RATIO) {
                    // Container is TALLER than game (fit to width)
                    newWidth = containerWidth;
                    newHeight = containerWidth / GAME_ASPECT_RATIO;
                } else {
                    // Container is WIDER than game (fit to height)
                    newHeight = containerHeight;
                    newWidth = containerHeight * GAME_ASPECT_RATIO;
                }

                // Apply the new size to the canvas's STYLE
                // This scales the 1080x1920 canvas to fit the space.
                canvas.style.width = `${Math.floor(newWidth)}px`;
                canvas.style.height = `${Math.floor(newHeight)}px`;
            }

            // Resize canvas on initial load and on window resize
            window.addEventListener('resize', resizeCanvas);
            resizeCanvas();

            // --- 2. HYPOTHETICAL GAME LOOP ---
            // Simple animation to show the canvas is live and scaled.
            let playerY = canvas.height * 0.75;
            let enemyY = canvas.height * 0.25;
            let time = 0;

            function gameLoop() {
                time += 0.05;
                
                // Clear the canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw "Player"
                ctx.fillStyle = '#3B82F6'; // blue
                ctx.fillRect(canvas.width / 2 - 50, playerY + Math.sin(time) * 10 - 50, 100, 100);
                ctx.fillStyle = 'white';
                ctx.font = '80px Inter';
                ctx.textAlign = 'center';
                ctx.fillText('P', canvas.width / 2, playerY + 25);
                
                // Draw "Enemy"
                ctx.fillStyle = '#DC2626'; // red
                ctx.fillRect(canvas.width / 2 - 50, enemyY + Math.cos(time) * 10 - 50, 100, 100);
                ctx.fillStyle = 'white';
                ctx.fillText('E', canvas.width / 2, enemyY + 25);

                requestAnimationFrame(gameLoop);
            }

            gameLoop();

            // --- 3. INPUT ABSTRACTION (Pointer Events) ---
            // We listen for 'pointerdown' which works for BOTH mouse clicks and touch taps.
            
            // Modal controls
            const settingsModal = document.getElementById('settings-modal');
            const settingsButton = document.getElementById('settings-btn');
            const closeModalButton = document.getElementById('close-modal-btn');

            settingsButton.addEventListener('pointerdown', (e) => {
                e.preventDefault();
                settingsModal.classList.remove('hidden');
                settingsModal.classList.add('flex');
            });

            closeModalButton.addEventListener('pointerdown', (e) => {
                e.preventDefault();
                settingsModal.classList.add('hidden');
                settingsModal.classList.remove('flex');
            });

            // Game action buttons
            const actionButtons = document.querySelectorAll('.game-button[data-action]');
            actionButtons.forEach(button => {
                button.addEventListener('pointerdown', (e) => {
                    e.preventDefault(); // Prevents double-firing 'click'
                    const action = e.currentTarget.dataset.action;
                    console.log(`Action triggered: ${action}`);
                    
                    // Add a simple visual feedback
                    e.currentTarget.style.transform = 'scale(0.95)';
                });
                
                // Reset visual feedback on pointer up
                button.addEventListener('pointerup', (e) => {
                    e.currentTarget.style.transform = 'scale(1)';
                });
                button.addEventListener('pointerleave', (e) => {
                    e.currentTarget.style.transform = 'scale(1)';
                });
            });
        });
    </script>

</body>
</html>
