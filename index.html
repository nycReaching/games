<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <!-- Title updated to reflect new theme -->
  <title>Mobile Portrait Game UI ‚Äî Ocean Theme</title>
  <!-- Theme color updated to the new palette -->
  <meta name="theme-color" content="#2495d3" />
  <style>
    /*
      Frutiger Aero / Ocean Theme (v3 "Oceanic")
      - Added animated background gradient for a "wavy" feel.
      - Added decorative SVG waves at the bottom.
      - Updated UI elements with a semi-transparent "frosted glass" blur.
    */

    :root {
      /* New Frutiger Aero Palette */
      --bg-light: #70d4ff;           /* Light sky blue */
      --bg-dark: #2495d3;            /* Deeper aqua blue */
      --bg-deep: #1a7bad;            /* Deep ocean blue */
      --surface: #ffffff;           /* Pure white for highlights */
      --surface-2: #eaf8ff;          /* Very light blue for gradients */
      --muted: #e0f4ff;              /* Subtle fills */
      --line: #a0c0e0;               /* Sharp, defined blue-gray border */
      --line-dark: #609acf;          /* Darker border for contrast */
      /* Added a light line for 3D bevel effect */
      --line-light: rgba(255,255,255,0.7);
      --text: #0d3859;               /* Dark, saturated blue text */
      --subtle-text: #3d6a8f;        /* Secondary text */
      --primary: #0078cd;            /* Bright "aqua" blue for buttons */
      --primary-press: #005fa3;      /* Pressed aqua */

      /* Updated shadows for a "chunkier", darker, "pop" effect */
      --shadow-elev: 0 8px 12px rgba(0, 60, 100, 0.25), 0 4px 4px rgba(0, 60, 100, 0.2);
      --shadow-soft: 0 5px 8px rgba(0, 60, 100, 0.15);

      --radius-lg: 18px;
      --radius-md: 16px;
      --gap: 14px;
      --strip-height: clamp(36px, 5.5vmin, 52px);
    }

    * { box-sizing: border-box; }

    html, body { height: 100%; }

    html, body {
      margin: 0;
      /* Updated font stack for a cleaner, 2000s feel */
      font-family: Arial, "Helvetica Neue", Helvetica, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Ubuntu, Cantarell, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      /* Background: Flowing, "wet" gradient with animation */
      background: linear-gradient(170deg, var(--bg-light) 0%, var(--bg-dark) 50%, var(--bg-deep) 100%);
      background-size: 100% 200%; /* Taller to allow vertical movement */
      animation: wave-bg-anim 15s ease infinite alternate;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100dvh;
      display: grid;
      place-items: center;
      padding: env(safe-area-inset-top) 0 env(safe-area-inset-bottom);
    }

    /* Animated background gradient keyframes */
    @keyframes wave-bg-anim {
      from { background-position: 0% 0%; }
      to { background-position: 0% 100%; }
    }
    @media (prefers-reduced-motion: reduce) {
      html, body { animation: none; }
    }

    /* Root app layout */
    .app {
      width: min(100vw, 56.25vh);
      aspect-ratio: 9 / 16;
      display: grid;
      grid-template-rows: 52px 1fr minmax(120px, 20vh);
      gap: 10px;
      padding: 10px 14px;
      margin: 0 auto;
      position: relative; /* Needed for z-index */
      overflow: hidden; /* To contain the waves */
    }

    /* Decorative wavy background element */
    .decorative-waves {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 150px; /* Wave height */
      /* Inlined SVG for wavy lines */
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1440 320'%3E%3Cpath fill='%23ffffff' fill-opacity='0.1' d='M0,160L48,181.3C96,203,192,245,288,261.3C384,277,480,267,576,234.7C672,203,768,149,864,138.7C960,128,1056,160,1152,165.3C1248,171,1344,149,1392,138.7L1440,128L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z'%3E%3C/path%3E%3C/svg%3E");
      background-repeat: repeat-x;
      background-position: bottom;
      background-size: cover;
      opacity: 0.5;
      filter: blur(1px); /* Soft blur */
      z-index: 1; /* Behind content */
      pointer-events: none;
      animation: wave-move 10s linear infinite;
    }

    @keyframes wave-move {
      from { background-position-x: 0px; }
      to { background-position-x: -1440px; } /* SVG width */
    }
    @media (prefers-reduced-motion: reduce) {
      .decorative-waves { animation: none; }
    }

    /* Ensure all app content is above the waves */
    .top, .middle, .bottom {
      position: relative;
      z-index: 2;
    }

    /* TOP: slim status/header */
    .top {
      /* Updated to be semi-transparent with blur */
      background: linear-gradient(180deg, rgba(255,255,255,0.7) 0%, rgba(234,248,255,0.7) 100%);
      backdrop-filter: blur(6px); /* Frosted glass blur */
      /* Chunky Bevel Border */
      border-top: 1px solid var(--line-light);
      border-left: 1px solid var(--line-light);
      border-bottom: 1px solid var(--line-dark);
      border-right: 1px solid var(--line-dark);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft), inset 0 1px 1px var(--surface); /* Soft shadow + inner highlight */
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 14px;
    }
    .brand {
      display: flex; gap: 10px; align-items: center;
      letter-spacing: 0.2px; font-weight: 600;
    }
    .brand .dot {
      /* "Aqua" sphere effect */
      width: 10px; height: 10px; border-radius: 50%;
      background: radial-gradient(circle at 50% 30%, #a0e0ff 0%, var(--primary) 100%);
      border: 1px solid var(--line-dark);
      box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.3);
    }
    .stats { display: flex; gap: 12px; align-items: center; color: var(--subtle-text); font-size: 13px; }

    .pill {
      /* Updated to be semi-transparent with blur */
      background: linear-gradient(180deg, rgba(255,255,255,0.7) 0%, rgba(234,248,255,0.7) 100%);
      backdrop-filter: blur(4px);
      /* Chunky Bevel Border */
      border-top: 1px solid var(--line-light);
      border-left: 1px solid var(--line-light);
      border-bottom: 1px solid var(--line-dark);
      border-right: 1px solid var(--line-dark);
      border-radius: 999px;
      padding: 6px 10px;
      display: inline-flex; gap: 6px; align-items: center;
      box-shadow: inset 0 1px 1px var(--surface), 0 1px 2px rgba(0, 80, 130, 0.05);
    }
    .pill svg { opacity: 0.7; }

    /* MIDDLE: big area with centered 3x3 board */
    .middle { display: grid; place-items: center; }


    /* Stack around the board */
    .board-stack {
      width: 100%;
      display: grid;
      grid-template-rows: var(--strip-height) 1fr var(--strip-height);
      gap: 8px;
    }
    .strip {
      /* Updated to be semi-transparent with blur */
      background: linear-gradient(180deg, rgba(255,255,255,0.7) 0%, rgba(234,248,255,0.7) 100%);
      backdrop-filter: blur(6px); /* Frosted glass blur */
      /* Chunky Bevel Border */
      border-top: 1px solid var(--line-light);
      border-left: 1px solid var(--line-light);
      border-bottom: 1px solid var(--line-dark);
      border-right: 1px solid var(--line-dark);
      border-radius: var(--radius-md);
      box-shadow: var(--shadow-soft), inset 0 1px 1px var(--surface);
      padding: 0 10px;
      display: flex;
      align-items: center;
    }

    /* Mini-bar content (chips + icons) */
    .mini-bar { width: 100%; display: flex; align-items: center; justify-content: space-between; }
    .mini-group { display: inline-flex; align-items: center; gap: 8px; }
    .chip {
      /* Updated to be semi-transparent with blur */
      background: rgba(224, 244, 255, 0.7); /* var(--muted) with alpha */
      backdrop-filter: blur(4px);
      /* Chunky Bevel Border */
      border-top: 1px solid var(--line-light);
      border-left: 1px solid var(--line-light);
      border-bottom: 1px solid var(--line-dark);
      border-right: 1px solid var(--line-dark);
      border-radius: 999px;
      padding: 6px 12px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 14px;
      box-shadow: var(--shadow-soft), inset 0 1px 1px var(--surface);
    }
    .chip .chip-icon { font-size: 15px; line-height: 1; }
    .icon-btn {
      width: 32px;
      height: 32px;
      font-size: 15px;
      border-radius: 50%;
      /* Chunky border for round button */
      border: 2px solid var(--line-dark);
      display: grid;
      place-items: center;
      /* Updated to be semi-transparent with blur */
      background: linear-gradient(180deg, rgba(255,255,255,0.7) 0%, rgba(234,248,255,0.7) 100%);
      backdrop-filter: blur(4px);
      /* Updated shadow */
      box-shadow: inset 0 1px 2px var(--surface), var(--shadow-soft);
      cursor: pointer;
      transition: all 100ms ease;
    }
    .icon-btn:active {
      transform: translateY(1px);
      background: var(--surface-2);
      /* Updated shadow */
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.1), 0 1px 2px rgba(0, 60, 100, 0.1);
    }

    .board {
      width: 100%;
      aspect-ratio: 1 / 1;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      gap: 12px;
    }

    .cell {
      position: relative;
      background: none;
      border: none;
      border-radius: 0;
      box-shadow: none;
      padding: 0;
      font-size: 20px; font-weight: 600; letter-spacing: 0.3px;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
      transition: transform 80ms ease, box-shadow 240ms ease;
      overflow: visible;
      perspective: 1000px;
    }
    .cell:active {
      transform: scale(0.985);
      box-shadow: var(--shadow-elev); /* Use new shadow */
    }

    /* Flipper styles */
    .cell__flipper {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.4s ease;
      transform-style: preserve-3d;
    }

    .cell.is-flipped .cell__flipper {
      transform: rotateY(180deg);
    }

    .cell__face {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      overflow: hidden;
      border-radius: var(--radius-md);
      /* Chunky Bevel Border */
      border-top: 1px solid var(--line-light);
      border-left: 1px solid var(--line-light);
      border-bottom: 1px solid var(--line-dark);
      border-right: 1px solid var(--line-dark);
      /* Updated shadow to use new var */
      box-shadow: var(--shadow-elev), inset 0 2px 2px rgba(255, 255, 255, 0.5); /* Stronger shadow + inner highlight */

      /* Updated to be semi-transparent with blur */
      background: linear-gradient(180deg, rgba(255,255,255,0.8) 0%, rgba(234,248,255,0.8) 100%);
      backdrop-filter: blur(4px);
    }

    .cell__face--front {
      display: grid;
      place-items: center;
    }

    .cell__face--back {
      transform: rotateY(180deg);
      display: flex;
      flex-direction: column;
      padding: 10px;
      color: var(--subtle-text);
      text-align: left;
    }

    .info-content {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
    }

    .info-emoji {
      font-size: 24px;
      line-height: 1;
      align-self: flex-start;
    }

    .info-divider {
      width: 100%;
      height: 1px;
      background: var(--line); /* Use new line color */
      margin: 6px 0;
    }

    .info-text {
      font-size: 11px;
      line-height: 1.4;
      margin: 0;
      font-weight: 500;
    }

    /* Emoji appearance (soft animation) */
    .emoji {
      font-size: clamp(32px, 10vmin, 64px);
      opacity: 0;
      transform: translateY(8px) scale(0.9);
      animation: emoji-in 420ms cubic-bezier(.2,.8,.2,1) forwards;
      will-change: transform, opacity;
      /* Dark blue drop shadow for emojis */
      text-shadow: 0 3px 5px rgba(13, 56, 89, 0.3); /* Based on var(--text) */
    }
    @keyframes emoji-in { 0% {opacity: 0; transform: translateY(8px) scale(0.9);} 60% {opacity: 1; transform: translateY(-2px) scale(1.04);} 100% {opacity: 1; transform: translateY(0) scale(1);} }
    @media (prefers-reduced-motion: reduce) { .emoji { animation: none; opacity: 1; transform: none; } }

    /* BOTTOM: compact bar with a large round primary button */
    .bottom {
      display: grid;
      place-items: center;
      padding: 0;
    }

    .action-wrap { display: grid; place-items: center; }

    .action-btn {
      /* "Aqua" Gel Button */
      --size: clamp(96px, 14vmin, 132px);
      width: var(--size);
      height: var(--size);
      border-radius: 50%;
      /* Thicker border for chunkiness */
      border: 2px solid var(--line-dark);
      /* Complex gradient for 3D "wet" look */
      background:
        radial-gradient(circle at 50% 35%, #80d8ff 0%, var(--primary) 70%),
        var(--primary);
      /* Strong shadow for a "popped" 3D effect */
      /* Strong shadow for a "popped" 3D effect - uses new var */
      box-shadow:
        inset 0 2px 4px rgba(255, 255, 255, 0.6), /* Inner top highlight */
        inset 0 -2px 4px rgba(0, 0, 0, 0.2),  /* Inner bottom shadow */
        var(--shadow-elev); /* Use new chunky shadow var */

      display: grid; place-items: center;
      font-weight: 700; letter-spacing: 0.4px; color: var(--text);
      cursor: pointer;
      position: relative; overflow: hidden;
      -webkit-tap-highlight-color: transparent;
      transition: all 100ms ease;
    }
    .action-btn:active {
      transform: translateY(2px) scale(0.98);
      background:
        radial-gradient(circle at 50% 40%, #60c8ff 0%, var(--primary-press) 70%),
        var(--primary-press);
      /* Updated active shadow */
      box-shadow:
        inset 0 2px 4px rgba(0, 0, 0, 0.2),
        0 4px 8px rgba(0, 60, 100, 0.2);
    }
    .action-btn:focus-visible {
      outline: 4px solid rgba(255, 255, 255, 0.7);
      outline-offset: 3px;
    }

    /* Ripple effect element */
    .ripple {
      position: absolute; border-radius: 50%; transform: scale(0);
      /* Ripple color updated to match new theme */
      background: rgba(255, 255, 255, 0.5);
      animation: ripple 550ms ease-out; pointer-events: none;
    }
    @keyframes ripple { to { transform: scale(3.2); opacity: 0; } }

    /* Orientation guard: nudge users back to portrait (phones only) */
    .rotate-overlay {
      position: fixed; inset: 0; display: none;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(3px);
      z-index: 50; color: var(--text);
      align-items: center; justify-content: center;
      text-align: center; padding: 32px;
    }
    @media (orientation: landscape) and (max-width: 768px) { .rotate-overlay { display: flex; } }

    /* Tiny helper icons */
    .icon { width: 16px; height: 16px; }

    /* Screen-reader only utility */
    .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }

    /* Safe tappable areas */
    button { border: 0; background: none; }
  </style>
</head>
<body>
  <!-- HTML structure remains the same, only styles are changed -->
  <div class="app" role="application" aria-label="Mobile Portrait Game UI">
    <!-- Decorative waves added -->
    <div class="decorative-waves" aria-hidden="true"></div>

    <!-- Top: slim status/header bar -->
    <header class="top" aria-label="Game header">
      <div class="brand" aria-label="Brand">
        <span class="dot" aria-hidden="true"></span>
        <span>Nova Grid</span>
      </div>
      <div class="stats" aria-label="Stats">
        <span class="pill" title="Level">
          <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M5 12h14M5 12a7 7 0 0 1 7-7v0a7 7 0 0 1 7 7M5 12a7 7 0 0 0 7 7v0a7 7 0 0 0 7-7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          <strong>Lv 3</strong>
        </span>
        <span class="pill" title="Score">
          <svg class="icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 6v12m6-6H6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
          1,250
        </span>
      </div>
    </header>

    <!-- Middle: centered 3x3 grid board -->
    <main class="middle" aria-label="Game board">
      <div class="board-stack" aria-label="Board stack">
        <div class="strip strip--top" aria-label="Top strip">
          <div class="mini-bar">
            <div class="mini-group" aria-label="Top counters">
              <span class="chip" aria-label="Lives"><span class="chip-icon">‚ù§Ô∏è</span><strong id="lives">3</strong></span>
              <span class="chip" aria-label="Gems"><span class="chip-icon">üíé</span><strong id="gems">12</strong></span>
              <span class="chip" aria-label="Timer"><span class="chip-icon">‚è±</span><strong id="timer">01:23</strong></span>
            </div>
            <div class="mini-group" aria-label="Top icons">
              <button class="icon-btn" aria-label="Settings"><span aria-hidden="true">‚öôÔ∏è</span></button>
            </div>
          </div>
        </div>

        <!-- Updated HTML structure for cells -->
        <section class="board" aria-label="3 by 3 grid">
          <button class="cell" aria-label="Cell 1" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
          <button class="cell" aria-label="Cell 2" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
          <button class="cell" aria-label="Cell 3" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
          <button class="cell" aria-label="Cell 4" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
          <button class="cell" aria-label="Cell 5" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
          <button class="cell" aria-label="Cell 6" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
          <button class="cell" aria-label="Cell 7" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
          <button class="cell" aria-label="Cell 8" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
          <button class="cell" aria-label="Cell 9" aria-pressed="false">
            <div class="cell__flipper">
              <div class="cell__face cell__face--front"></div>
              <div class="cell__face cell__face--back"></div>
            </div>
          </button>
        </section>
        <!-- End of updated HTML structure -->

        <div class="strip strip--bottom" aria-label="Bottom strip">
          <div class="mini-bar">
            <div class="mini-group" aria-label="Bottom counters">
              <span class="chip" aria-label="Streak"><span class="chip-icon">üî•</span><strong id="streak">x2</strong></span>
              <span class="chip" aria-label="Stars"><span class="chip-icon">‚≠êÔ∏è</span><strong id="stars">5</strong></span>
            </div>
            <div class="mini-group" aria-label="Bottom icons">
              <button class="icon-btn" aria-label="Help"><span aria-hidden="true">‚ùî</span></button>
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Bottom: centered prominent round button (hints removed) -->
    <footer class="bottom" aria-label="Actions">
      <div class="action-wrap">
        <button class="action-btn" id="primaryAction" aria-label="Primary action">
          <!-- The button text/icon would go here, but the ripple needs it empty -->
          <span class="sr-only">Primary Action</span>
        </button>
      </div>
    </footer>
  </div>

  <!-- Landscape orientation overlay -->
  <div class="rotate-overlay" aria-live="polite">
    <div>
      <svg width="48" height="48" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M7 7h10a2 2 0 0 1 2 2v6m-2 2H7a2 2 0 0 1-2-2V9m10-5 4 4m0-4-4 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      <div style="margin-top:12px; font-weight:600">Please rotate your device</div>
      <div style="margin-top:6px; color:var(--subtle-text)">This game is best in portrait.</div>
    </div>
  </div>

  <script>
    // JavaScript logic
    const cells = Array.from(document.querySelectorAll('.cell'));

    // Tap to toggle the flip
    cells.forEach((c) => {
      c.addEventListener('click', () => {
        c.classList.toggle('is-flipped');
        // Update ARIA
        if (c.classList.contains('is-flipped')) {
            c.setAttribute('aria-pressed', 'true');
        } else {
            c.setAttribute('aria-pressed', 'false');
        }
      });
    });

    // Primary action button ripple + emoji populate
    const actionBtn = document.getElementById('primaryAction');

    // === EMOJI POOL UPDATED ===
    // Emoji set for the grid
    const EMOJIS = ['üêô', 'ü¶ë', 'ü¶ê', 'ü¶û', 'ü¶Ä', 'üê°', 'üê†', 'üêü', 'üê¨', 'üê≥', 'üêã', 'ü¶à', 'üêö', 'ü™∏'];

    // Emoji descriptions
    const EMOJI_INFO = {
      'üêô': 'An octopus with eight arms. Very smart!',
      'ü¶ë': 'A squid, related to the octopus. Swims fast!',
      'ü¶ê': 'A small shrimp. A tasty seafood.',
      'ü¶û': 'A lobster with big claws. A delicacy!',
      'ü¶Ä': 'A crab that walks sideways. Watch out for its pinchers!',
      'üê°': 'A pufferfish. Puffs up when scared!',
      'üê†': 'A colorful tropical fish. Lives in coral reefs.',
      'üêü': 'A fish, just swimming along. Glub glub!',
      'üê¨': 'A playful dolphin. Known for its high jumps.',
      'üê≥': 'A spouting whale. A gentle giant of the sea.',
      'üêã': 'A blue whale, the largest animal on Earth!',
      'ü¶à': 'A shark, the apex predator of the ocean.',
      'üêö': 'A beautiful seashell. Listen for the ocean!',
      'ü™∏': 'A piece of coral. Home to many fish!'
    };


    function populateEmojisSoft() {
      // Clear any existing emojis and add new ones with a soft staggered animation
      cells.forEach((c, i) => {
        // Find faces
        const frontFace = c.querySelector('.cell__face--front');
        const backFace = c.querySelector('.cell__face--back');

        // Always unflip when populating
        c.classList.remove('is-flipped');
        c.setAttribute('aria-pressed', 'false');

        // Clear old content
        if (frontFace) frontFace.innerHTML = '';
        if (backFace) backFace.innerHTML = '';

        // Get random emoji
        const emoji = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
        const description = EMOJI_INFO[emoji] || 'No info available.';

        // Populate front face
        const span = document.createElement('span');
        span.className = 'emoji';
        span.textContent = emoji;
        span.style.animationDelay = (i * 30) + 'ms'; // gentle cascade
        if (frontFace) frontFace.appendChild(span);

        // Populate back face
        const infoContainer = document.createElement('div');
        infoContainer.className = 'info-content';
        infoContainer.innerHTML = `
          <span class="info-emoji" aria-hidden="true">${emoji}</span>
          <div class="info-divider"></div>
          <p class="info-text">${description}</p>
        `;
        if (backFace) backFace.appendChild(infoContainer);

        // Update ARIA label
        c.setAttribute('aria-label', `Cell ${i + 1}, ${emoji}, tap to see info`);
      });
    }

    actionBtn.addEventListener('click', (e) => {
      // ripple
      const rect = actionBtn.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const ripple = document.createElement('span');
      ripple.className = 'ripple';
      ripple.style.width = ripple.style.height = size + 'px';
      const x = e.clientX - rect.left - size / 2;
      const y = e.clientY - rect.top - size / 2;
      ripple.style.left = x + 'px';
      ripple.style.top = y + 'px';
      actionBtn.appendChild(ripple);
      ripple.addEventListener('animationend', () => ripple.remove());

      // populate emojis with soft animation
      populateEmojisSoft();
    });

    // Trigger the emoji population on load for an initial state
    window.addEventListener('load', () => {
      populateEmojisSoft();

      // === BUTTON ICON REMOVED ===
      // The actionIcon code that was here has been removed.
    });
  </script>
</body>
</html>

